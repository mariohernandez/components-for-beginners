# Exercise 2.5

### Taking our new Gulp workflow for a test drive

So our gulp workflow is in place, but how do we know it works?  How about if we update the CSS files we created for the Button, Hearing and Hero components?  Great idea! ðŸ’¡

1. Delete `button.css`, `heading.css`, and `hero.css` from `public/css`.  These files will be created again with Gulp, but to ensure our new workflow is working, we're deleting them so we can ensure they get created again.
2. Move `button.css`, `heading.css`, and `hero.css` from `source/css` into each of the respective components.  If you are using VS Code you can literally drag the files into each of the components.
3. Rename each CSS file in the components as `button.scss`, `heading.scss`, and `hero.scss`

[Sass](https://sass-lang.com/guide) is a CSS Preprocessor, which means Sass lets you use features that don't exist in CSS yet like variables, nesting, mixins, inheritance and other nifty goodies that make writing CSS fun again. This provides all kinds of advantages over plain CSS as you will see when we start writing more Sass code.  The most commonly used Sass syntax is known as â€œ**SCSS**â€ \(for â€œSassy **CSS**â€\), and is a superset of [CSS3's syntax](https://learn.shayhowe.com/html-css/getting-to-know-css/).  SCSS syntax is easy to learn as it most closely resembles CSS syntax.  In fact, if you noticed in step 2 above, all we did to start using SCSS was to rename files from `.css` to `.scss` and that's it, we are now using Sass. ðŸ¤¯

### Running Gulp

Alright, let's run gulp for the first time and let's cross our fingers that everything works ðŸ¤ž

1. While in **components\_project** in your command line tool, run:

```bash
npm start

npm run gulp
```

#### Did it work?  I don't want to look ðŸ™‰ 

If you see something like this after running gulp for the first time, no worries.  We can fix these issues:

{% tabs %}
{% tab title="command line" %}
```bash
> patternlab@1.0.0 gulp /Users/your-username/Sites/components_project
> gulp

[11:31:02] Using gulpfile ~/Sites/patternlab/gulpfile.js
[11:31:02] Starting 'default'...
[11:31:02] Starting 'lintSass'...
[11:31:02] Starting 'compileSass'...
[11:31:02] Finished 'compileSass' after 108 ms
[11:31:02] 

source/_patterns/00-atoms/heading/heading.scss
 12:1  âš   Unexpected missing end-of-source newline   no-missing-end-of-source-newline

source/_patterns/01-molecules/hero/hero.scss
 15:1  âš   Unexpected empty line before closing brace   block-closing-brace-empty-line-before
 20:1  âš   Unexpected missing end-of-source newline     no-missing-end-of-source-newline



[11:31:02] Finished 'lintSass' after 686 ms
[11:31:02] Starting 'concatCSS'...
[11:31:02] Finished 'concatCSS' after 9.27 ms
[11:31:02] Finished 'default' after 697 ms
my-MBP components_project % 
```
{% endtab %}
{% endtabs %}

Your output above may be different  No worries.  The point is that this worked and we're good to go ðŸ™Œ

#### But what does all the code above mean? \(demo only\)

* The lines with `Starting` and `Finished` are the tasks we implemented for gulp \(compile, concatenate, lint\).
* The lines where you see a reference to a `.scss` file \(i.e. `heading.scss` or `hero.scss` \) are actually warnings generated by the linting tasks we put in place.  These messages tell you the file name, and the line number of where some issues may exist.  This is so helpful because we can go to those files and look in those line numbers and fix things accordingly.
* Notice this message above: `Unexpected missing end-of-source newline`.  It is a good practice to add an empty line at the end of most code files.  Once we do that these warnings will go away.
* The other issue is `Unexpected empty line before closing brace`.  Once I fix both those issues and run `npm run gulp` again, I shold see the following:

```bash
[11:54:06] Using gulpfile ~/Sites/patternlab/gulpfile.js
[11:54:06] Starting 'default'...
[11:54:06] Starting 'lintSass'...
[11:54:06] Starting 'compileSass'...
[11:54:06] Finished 'compileSass' after 113 ms
[11:54:06] Finished 'lintSass' after 589 ms
[11:54:06] Starting 'concatCSS'...
[11:54:07] Finished 'concatCSS' after 10 ms
[11:54:07] Finished 'default' after 601 ms
```

* Check in `public/css` and confirm `button.css`, `heading.css`, and `hero.css` were recreated
* Also confirm `all.css` was created.

#### Start Pattern Lab

```bash
npm start
```

* If we did everything, the Button, Heading, and Hero components should look the same way they did before setting up Gulp.

#### Running Gulp

Since the new Gulp workflow is separate from Pattern Lab's compiling tasks, we need to run both tasks simultaneously \(`npm start` and `npm run watch` \). Pattern Lab's task watches for any Twig or JSON changes, while our new Gulp workflow watches for any changes we make to Sass files and compiles them to CSS. Let's take a look at how we can do this in VS Code and Outside of VS Code for those not using VS Code.

#### Running Gulp and Pattern Lab together from VS Code

1. In VS Code, open the command line tool \(**View &gt; Terminal**\).  You will most likely have Pattern Lab running, otherwise type `npm start` and press **Return**
2. With Pattern Lab running in your command line, press **Cmd + \** or click **Terminal &gt; Split Terminal** \(from VS Code's toolbar\).  You should now have  two terminal windows in which you can run different commands.
3. In the second tab, type the following command and press **Return**

```text
npm run watch
```

#### Running Gulp and Pattern Lab together from Outside VS Code

If you have opted to use a command line tool that it's not in VS Code \(Terminal or PowerShell\), or, if you are not using VS Code as your editor, follow these steps:

1. Open your command line tool.  You will most likely have Pattern Lab running, otherwise type `npm start` from within the **components\_project** directory, and press **Return**
2. Press **Cmd + T** \(**Ctrl + T** in Windows\), or Look in the toolbar of your command line tool and find the option to open a new tab.
3. In the second tab, type the following command and press **Return**

```text
npm run watch
```

### Success! ðŸ’ª

